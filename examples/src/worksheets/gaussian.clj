;; gorilla-repl.fileformat = 1

;; **
;;; # Gaussian
;; **

;; **
;;; Import the minimum required libraries to run define queries, compile them, and run the inference using compiled artifacts.
;; **

;; @@
(ns worksheets.gaussian
  (:require [anglican.runtime :refer :all]
            [anglican.emit :refer [defquery]]
            [anglican.stat :as stat]
            [anglican.infcomp.zmq :as zmq]
            [anglican.inference :refer [infer]]
            [anglican.infcomp.prior :as prior]
            [gorilla-plot.core :as plt]
            anglican.infcomp.csis
            anglican.importance
            anglican.infcomp.core))

(anglican.infcomp.core/reset-infcomp-addressing-scheme!)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>#function[anglican.infcomp.core/reset-infcomp-addressing-scheme!$fn--27296$fn--27297]</span>","value":"#function[anglican.infcomp.core/reset-infcomp-addressing-scheme!$fn--27296$fn--27297]"}
;; <=

;; **
;;; ## Model
;; **

;; @@
(def prior-mean 0)
(def prior-std 1)
(def observation-std 0.1)

(defquery gaussian [obs]
  (let [mean (sample (normal prior-mean prior-std))
        std observation-std]
    (observe (normal mean std) obs)
    mean))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;worksheets.gaussian/gaussian</span>","value":"#'worksheets.gaussian/gaussian"}
;; <=

;; **
;;; ## Inference Compilation
;; **

;; @@
(defn combine-observes-fn [observes]
  (:value (first observes)))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;worksheets.gaussian/combine-observes-fn</span>","value":"#'worksheets.gaussian/combine-observes-fn"}
;; <=

;; @@
(prior/sample-observes-from-prior gaussian [nil])
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:time-index</span>","value":":time-index"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:time-index 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:observe-address</span>","value":":observe-address"},{"type":"html","content":"<span class='clj-symbol'>O4</span>","value":"O4"}],"value":"[:observe-address O4]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:observe-instance</span>","value":":observe-instance"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:observe-instance 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:value</span>","value":":value"},{"type":"html","content":"<span class='clj-double'>0.5308695463672052</span>","value":"0.5308695463672052"}],"value":"[:value 0.5308695463672052]"}],"value":"{:time-index 0, :observe-address O4, :observe-instance 0, :value 0.5308695463672052}"}],"value":"[{:time-index 0, :observe-address O4, :observe-instance 0, :value 0.5308695463672052}]"}
;; <=

;; @@
(def replier (zmq/start-replier gaussian [nil] combine-observes-fn))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;worksheets.gaussian/replier</span>","value":"#'worksheets.gaussian/replier"}
;; <=

;; @@
(zmq/stop-replier replier)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-string'>&quot;ZMQ connection terminated.&quot;</span>","value":"\"ZMQ connection terminated.\""}
;; <=

;; **
;;; ## Inference
;; **

;; @@
(defn posterior-mean-std [prior-mean prior-std observation-std test-observations]
  (let [prior-variance (* prior-std prior-std)
        observation-variance (* observation-std observation-std)
        num-observations (count test-observations)
        posterior-mean (+ (/ (* observation-variance prior-mean)
                              (+ (* num-observations prior-variance) observation-variance))
                           (/ (* num-observations prior-variance (/ (reduce + test-observations) num-observations))
                              (+ (* num-observations prior-variance) observation-variance)))
        posterior-variance (/ 1 (+ (/ 1 prior-variance) (/ num-observations observation-variance)))]
    [posterior-mean (Math/sqrt posterior-variance)]))

(def test-observation 2.3)
(def posterior-dist (apply normal (posterior-mean-std prior-mean prior-std observation-std [test-observation])))
(def posterior-plot (plt/plot #(Math/exp (observe* posterior-dist %)) [-3 3]))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;worksheets.gaussian/posterior-plot</span>","value":"#'worksheets.gaussian/posterior-plot"}
;; <=

;; @@
(def num-particles 100)
(def csis-states (take num-particles (infer :csis gaussian [test-observation])))
(plt/compose
  posterior-plot
  (plt/histogram (repeatedly 10000 #(sample* (categorical (vec (stat/empirical-distribution (stat/collect-results csis-states)))))) :normalize :probability-density))
;; @@
;; =>
;;; {"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"top":10,"left":55,"bottom":40,"right":10},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"2aed3e6d-e071-4d2b-a6a3-f2dfa6961f68","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"2aed3e6d-e071-4d2b-a6a3-f2dfa6961f68","field":"data.y"}}],"axes":[{"type":"x","scale":"x"},{"type":"y","scale":"y"}],"data":[{"name":"2aed3e6d-e071-4d2b-a6a3-f2dfa6961f68","values":[{"x":-3,"y":0.0},{"x":-2.9400000013411045,"y":0.0},{"x":-2.880000002682209,"y":0.0},{"x":-2.8200000040233135,"y":0.0},{"x":-2.760000005364418,"y":0.0},{"x":-2.7000000067055225,"y":0.0},{"x":-2.640000008046627,"y":0.0},{"x":-2.5800000093877316,"y":0.0},{"x":-2.520000010728836,"y":0.0},{"x":-2.4600000120699406,"y":0.0},{"x":-2.400000013411045,"y":0.0},{"x":-2.3400000147521496,"y":0.0},{"x":-2.280000016093254,"y":0.0},{"x":-2.2200000174343586,"y":0.0},{"x":-2.160000018775463,"y":0.0},{"x":-2.1000000201165676,"y":0.0},{"x":-2.040000021457672,"y":0.0},{"x":-1.9800000227987766,"y":0.0},{"x":-1.9200000241398811,"y":0.0},{"x":-1.8600000254809856,"y":0.0},{"x":-1.8000000268220901,"y":0.0},{"x":-1.7400000281631947,"y":0.0},{"x":-1.6800000295042992,"y":0.0},{"x":-1.6200000308454037,"y":0.0},{"x":-1.5600000321865082,"y":4.4E-323},{"x":-1.5000000335276127,"y":4.9113798103E-313},{"x":-1.4400000348687172,"y":3.574780202683354E-303},{"x":-1.3800000362098217,"y":1.8087798075632448E-293},{"x":-1.3200000375509262,"y":6.362277264443301E-284},{"x":-1.2600000388920307,"y":1.5557149147154005E-274},{"x":-1.2000000402331352,"y":2.644465908450867E-265},{"x":-1.1400000415742397,"y":3.1249024413932006E-256},{"x":-1.0800000429153442,"y":2.5669977469695233E-247},{"x":-1.0200000442564487,"y":1.4659023636055675E-238},{"x":-0.9600000455975533,"y":5.819358815166062E-230},{"x":-0.9000000469386578,"y":1.6059638332043679E-221},{"x":-0.8400000482797623,"y":3.080966091073537E-213},{"x":-0.7800000496208668,"y":4.108928743782036E-205},{"x":-0.7200000509619713,"y":3.809437342210934E-197},{"x":-0.6600000523030758,"y":2.4551814429930886E-189},{"x":-0.6000000536441803,"y":1.1000106365270637E-181},{"x":-0.5400000549852848,"y":3.426105323550485E-174},{"x":-0.4800000563263893,"y":7.418140732437264E-167},{"x":-0.4200000576674938,"y":1.1165545874443118E-159},{"x":-0.3600000590085983,"y":1.168302714230096E-152},{"x":-0.30000006034970284,"y":8.498090358137434E-146},{"x":-0.24000006169080734,"y":4.297123512648931E-139},{"x":-0.18000006303191185,"y":1.5105143747621218E-132},{"x":-0.12000006437301636,"y":3.691156182843066E-126},{"x":-0.060000065714120865,"y":6.270331682802175E-120},{"x":-6.705522537231445E-8,"y":7.404728517709424E-114},{"x":0.05999993160367012,"y":6.078806230830808E-108},{"x":0.11999993026256561,"y":3.4691093772710382E-102},{"x":0.1799999289214611,"y":1.3762845015356378E-96},{"x":0.2399999275803566,"y":3.795674647579944E-91},{"x":0.2999999262392521,"y":7.277132329850067E-86},{"x":0.3599999248981476,"y":9.698891457036999E-81},{"x":0.4199999235570431,"y":8.986166459405543E-76},{"x":0.47999992221593857,"y":5.7878511394684175E-71},{"x":0.5399999208748341,"y":2.5914974138440473E-66},{"x":0.5999999195337296,"y":8.066306873558855E-62},{"x":0.659999918192625,"y":1.7453769414996687E-57},{"x":0.7199999168515205,"y":2.625392628171194E-53},{"x":0.779999915510416,"y":2.74530007684044E-49},{"x":0.8399999141693115,"y":1.9956111253979068E-45},{"x":0.899999912828207,"y":1.0084457594385378E-41},{"x":0.9599999114871025,"y":3.5425803158997096E-38},{"x":1.019999910145998,"y":8.651220865755213E-35},{"x":1.0799999088048935,"y":1.4686747475789843E-31},{"x":1.139999907463789,"y":1.7332626920942418E-28},{"x":1.1999999061226845,"y":1.4219806410548192E-25},{"x":1.25999990478158,"y":8.109862896734052E-23},{"x":1.3199999034404755,"y":3.215317571586265E-20},{"x":1.379999902099371,"y":8.861857639885287E-18},{"x":1.4399999007582664,"y":1.6979159876603773E-15},{"x":1.499999899417162,"y":2.2615081632102484E-13},{"x":1.5599998980760574,"y":2.0939709637907934E-11},{"x":1.619999896734953,"y":1.3478255479072613E-9},{"x":1.6799998953938484,"y":6.030971087720636E-8},{"x":1.739999894052744,"y":1.875993556111744E-6},{"x":1.7999998927116394,"y":4.056635356393333E-5},{"x":1.859999891370535,"y":6.098052151343168E-4},{"x":1.9199998900294304,"y":0.006372455777420705},{"x":1.9799998886883259,"y":0.04629275844616156},{"x":2.0399998873472214,"y":0.2337813288199048},{"x":2.099999886006117,"y":0.8207239732100083},{"x":2.1599998846650124,"y":2.0029723270505664},{"x":2.219999883323908,"y":3.398156001567204},{"x":2.2799998819828033,"y":4.007764639778572},{"x":2.339999880641699,"y":3.2858795490140857},{"x":2.3999998793005943,"y":1.8728008725028966},{"x":2.45999987795949,"y":0.7420310868049215},{"x":2.5199998766183853,"y":0.20438222867765646},{"x":2.579999875277281,"y":0.03913404089701856},{"x":2.6399998739361763,"y":0.00520902919965667},{"x":2.699999872595072,"y":4.8200264643181317E-4},{"x":2.7599998712539673,"y":3.100506077674955E-5},{"x":2.8199998699128628,"y":1.3864566166371108E-6},{"x":2.8799998685717583,"y":4.3099329696395804E-8},{"x":2.9399998672306538,"y":9.313765097953726E-10},{"x":2.9999998658895493,"y":1.399170301845073E-11}]},{"name":"b7b73b31-2153-4cb6-b3e3-877ceb17eca7","values":[{"x":1.8905113414212087,"y":0},{"x":1.942702831557041,"y":0.0019160211701130293},{"x":1.9948943216928732,"y":0.04215246574248665},{"x":2.0470858118287056,"y":0.09580105850565147},{"x":2.099277301964538,"y":0.5173257159305179},{"x":2.1514687921003706,"y":2.6192009395445113},{"x":2.203660282236203,"y":5.8879330557573395},{"x":2.2558517723720355,"y":0.0},{"x":2.308043262507868,"y":2.6192009395445113},{"x":2.3602347526437004,"y":5.2939664930223005},{"x":2.412426242779533,"y":0.9426824156956104},{"x":2.4646177329153653,"y":0.8334692089991678},{"x":2.516809223051198,"y":0.20693028637220717},{"x":2.5690007131870303,"y":0.0},{"x":2.6211922033228627,"y":0.07664084680452117},{"x":2.673383693458695,"y":0.022992254041356353},{"x":2.7255751835945277,"y":0}]}],"marks":[{"type":"line","from":{"data":"2aed3e6d-e071-4d2b-a6a3-f2dfa6961f68"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#FF29D2"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"b7b73b31-2153-4cb6-b3e3-877ceb17eca7"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"2aed3e6d-e071-4d2b-a6a3-f2dfa6961f68\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"2aed3e6d-e071-4d2b-a6a3-f2dfa6961f68\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}], :data ({:name \"2aed3e6d-e071-4d2b-a6a3-f2dfa6961f68\", :values ({:x -3, :y 0.0} {:x -2.9400000013411045, :y 0.0} {:x -2.880000002682209, :y 0.0} {:x -2.8200000040233135, :y 0.0} {:x -2.760000005364418, :y 0.0} {:x -2.7000000067055225, :y 0.0} {:x -2.640000008046627, :y 0.0} {:x -2.5800000093877316, :y 0.0} {:x -2.520000010728836, :y 0.0} {:x -2.4600000120699406, :y 0.0} {:x -2.400000013411045, :y 0.0} {:x -2.3400000147521496, :y 0.0} {:x -2.280000016093254, :y 0.0} {:x -2.2200000174343586, :y 0.0} {:x -2.160000018775463, :y 0.0} {:x -2.1000000201165676, :y 0.0} {:x -2.040000021457672, :y 0.0} {:x -1.9800000227987766, :y 0.0} {:x -1.9200000241398811, :y 0.0} {:x -1.8600000254809856, :y 0.0} {:x -1.8000000268220901, :y 0.0} {:x -1.7400000281631947, :y 0.0} {:x -1.6800000295042992, :y 0.0} {:x -1.6200000308454037, :y 0.0} {:x -1.5600000321865082, :y 4.4E-323} {:x -1.5000000335276127, :y 4.9113798103E-313} {:x -1.4400000348687172, :y 3.574780202683354E-303} {:x -1.3800000362098217, :y 1.8087798075632448E-293} {:x -1.3200000375509262, :y 6.362277264443301E-284} {:x -1.2600000388920307, :y 1.5557149147154005E-274} {:x -1.2000000402331352, :y 2.644465908450867E-265} {:x -1.1400000415742397, :y 3.1249024413932006E-256} {:x -1.0800000429153442, :y 2.5669977469695233E-247} {:x -1.0200000442564487, :y 1.4659023636055675E-238} {:x -0.9600000455975533, :y 5.819358815166062E-230} {:x -0.9000000469386578, :y 1.6059638332043679E-221} {:x -0.8400000482797623, :y 3.080966091073537E-213} {:x -0.7800000496208668, :y 4.108928743782036E-205} {:x -0.7200000509619713, :y 3.809437342210934E-197} {:x -0.6600000523030758, :y 2.4551814429930886E-189} {:x -0.6000000536441803, :y 1.1000106365270637E-181} {:x -0.5400000549852848, :y 3.426105323550485E-174} {:x -0.4800000563263893, :y 7.418140732437264E-167} {:x -0.4200000576674938, :y 1.1165545874443118E-159} {:x -0.3600000590085983, :y 1.168302714230096E-152} {:x -0.30000006034970284, :y 8.498090358137434E-146} {:x -0.24000006169080734, :y 4.297123512648931E-139} {:x -0.18000006303191185, :y 1.5105143747621218E-132} {:x -0.12000006437301636, :y 3.691156182843066E-126} {:x -0.060000065714120865, :y 6.270331682802175E-120} {:x -6.705522537231445E-8, :y 7.404728517709424E-114} {:x 0.05999993160367012, :y 6.078806230830808E-108} {:x 0.11999993026256561, :y 3.4691093772710382E-102} {:x 0.1799999289214611, :y 1.3762845015356378E-96} {:x 0.2399999275803566, :y 3.795674647579944E-91} {:x 0.2999999262392521, :y 7.277132329850067E-86} {:x 0.3599999248981476, :y 9.698891457036999E-81} {:x 0.4199999235570431, :y 8.986166459405543E-76} {:x 0.47999992221593857, :y 5.7878511394684175E-71} {:x 0.5399999208748341, :y 2.5914974138440473E-66} {:x 0.5999999195337296, :y 8.066306873558855E-62} {:x 0.659999918192625, :y 1.7453769414996687E-57} {:x 0.7199999168515205, :y 2.625392628171194E-53} {:x 0.779999915510416, :y 2.74530007684044E-49} {:x 0.8399999141693115, :y 1.9956111253979068E-45} {:x 0.899999912828207, :y 1.0084457594385378E-41} {:x 0.9599999114871025, :y 3.5425803158997096E-38} {:x 1.019999910145998, :y 8.651220865755213E-35} {:x 1.0799999088048935, :y 1.4686747475789843E-31} {:x 1.139999907463789, :y 1.7332626920942418E-28} {:x 1.1999999061226845, :y 1.4219806410548192E-25} {:x 1.25999990478158, :y 8.109862896734052E-23} {:x 1.3199999034404755, :y 3.215317571586265E-20} {:x 1.379999902099371, :y 8.861857639885287E-18} {:x 1.4399999007582664, :y 1.6979159876603773E-15} {:x 1.499999899417162, :y 2.2615081632102484E-13} {:x 1.5599998980760574, :y 2.0939709637907934E-11} {:x 1.619999896734953, :y 1.3478255479072613E-9} {:x 1.6799998953938484, :y 6.030971087720636E-8} {:x 1.739999894052744, :y 1.875993556111744E-6} {:x 1.7999998927116394, :y 4.056635356393333E-5} {:x 1.859999891370535, :y 6.098052151343168E-4} {:x 1.9199998900294304, :y 0.006372455777420705} {:x 1.9799998886883259, :y 0.04629275844616156} {:x 2.0399998873472214, :y 0.2337813288199048} {:x 2.099999886006117, :y 0.8207239732100083} {:x 2.1599998846650124, :y 2.0029723270505664} {:x 2.219999883323908, :y 3.398156001567204} {:x 2.2799998819828033, :y 4.007764639778572} {:x 2.339999880641699, :y 3.2858795490140857} {:x 2.3999998793005943, :y 1.8728008725028966} {:x 2.45999987795949, :y 0.7420310868049215} {:x 2.5199998766183853, :y 0.20438222867765646} {:x 2.579999875277281, :y 0.03913404089701856} {:x 2.6399998739361763, :y 0.00520902919965667} {:x 2.699999872595072, :y 4.8200264643181317E-4} {:x 2.7599998712539673, :y 3.100506077674955E-5} {:x 2.8199998699128628, :y 1.3864566166371108E-6} {:x 2.8799998685717583, :y 4.3099329696395804E-8} {:x 2.9399998672306538, :y 9.313765097953726E-10} {:x 2.9999998658895493, :y 1.399170301845073E-11})} {:name \"b7b73b31-2153-4cb6-b3e3-877ceb17eca7\", :values ({:x 1.8905113414212087, :y 0} {:x 1.942702831557041, :y 0.0019160211701130293} {:x 1.9948943216928732, :y 0.04215246574248665} {:x 2.0470858118287056, :y 0.09580105850565147} {:x 2.099277301964538, :y 0.5173257159305179} {:x 2.1514687921003706, :y 2.6192009395445113} {:x 2.203660282236203, :y 5.8879330557573395} {:x 2.2558517723720355, :y 0.0} {:x 2.308043262507868, :y 2.6192009395445113} {:x 2.3602347526437004, :y 5.2939664930223005} {:x 2.412426242779533, :y 0.9426824156956104} {:x 2.4646177329153653, :y 0.8334692089991678} {:x 2.516809223051198, :y 0.20693028637220717} {:x 2.5690007131870303, :y 0.0} {:x 2.6211922033228627, :y 0.07664084680452117} {:x 2.673383693458695, :y 0.022992254041356353} {:x 2.7255751835945277, :y 0})}), :marks ({:type \"line\", :from {:data \"2aed3e6d-e071-4d2b-a6a3-f2dfa6961f68\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#FF29D2\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"b7b73b31-2153-4cb6-b3e3-877ceb17eca7\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}"}
;; <=

;; @@
(def num-particles 100)
(def is-states (take num-particles (infer :importance gaussian [test-observation])))
(plt/compose
  posterior-plot
  (plt/histogram (repeatedly 10000 #(sample* (categorical (vec (stat/empirical-distribution (stat/collect-results is-states)))))) :normalize :probability-density))
;; @@
;; =>
;;; {"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"top":10,"left":55,"bottom":40,"right":10},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"2aed3e6d-e071-4d2b-a6a3-f2dfa6961f68","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"2aed3e6d-e071-4d2b-a6a3-f2dfa6961f68","field":"data.y"}}],"axes":[{"type":"x","scale":"x"},{"type":"y","scale":"y"}],"data":[{"name":"2aed3e6d-e071-4d2b-a6a3-f2dfa6961f68","values":[{"x":-3,"y":0.0},{"x":-2.9400000013411045,"y":0.0},{"x":-2.880000002682209,"y":0.0},{"x":-2.8200000040233135,"y":0.0},{"x":-2.760000005364418,"y":0.0},{"x":-2.7000000067055225,"y":0.0},{"x":-2.640000008046627,"y":0.0},{"x":-2.5800000093877316,"y":0.0},{"x":-2.520000010728836,"y":0.0},{"x":-2.4600000120699406,"y":0.0},{"x":-2.400000013411045,"y":0.0},{"x":-2.3400000147521496,"y":0.0},{"x":-2.280000016093254,"y":0.0},{"x":-2.2200000174343586,"y":0.0},{"x":-2.160000018775463,"y":0.0},{"x":-2.1000000201165676,"y":0.0},{"x":-2.040000021457672,"y":0.0},{"x":-1.9800000227987766,"y":0.0},{"x":-1.9200000241398811,"y":0.0},{"x":-1.8600000254809856,"y":0.0},{"x":-1.8000000268220901,"y":0.0},{"x":-1.7400000281631947,"y":0.0},{"x":-1.6800000295042992,"y":0.0},{"x":-1.6200000308454037,"y":0.0},{"x":-1.5600000321865082,"y":4.4E-323},{"x":-1.5000000335276127,"y":4.9113798103E-313},{"x":-1.4400000348687172,"y":3.574780202683354E-303},{"x":-1.3800000362098217,"y":1.8087798075632448E-293},{"x":-1.3200000375509262,"y":6.362277264443301E-284},{"x":-1.2600000388920307,"y":1.5557149147154005E-274},{"x":-1.2000000402331352,"y":2.644465908450867E-265},{"x":-1.1400000415742397,"y":3.1249024413932006E-256},{"x":-1.0800000429153442,"y":2.5669977469695233E-247},{"x":-1.0200000442564487,"y":1.4659023636055675E-238},{"x":-0.9600000455975533,"y":5.819358815166062E-230},{"x":-0.9000000469386578,"y":1.6059638332043679E-221},{"x":-0.8400000482797623,"y":3.080966091073537E-213},{"x":-0.7800000496208668,"y":4.108928743782036E-205},{"x":-0.7200000509619713,"y":3.809437342210934E-197},{"x":-0.6600000523030758,"y":2.4551814429930886E-189},{"x":-0.6000000536441803,"y":1.1000106365270637E-181},{"x":-0.5400000549852848,"y":3.426105323550485E-174},{"x":-0.4800000563263893,"y":7.418140732437264E-167},{"x":-0.4200000576674938,"y":1.1165545874443118E-159},{"x":-0.3600000590085983,"y":1.168302714230096E-152},{"x":-0.30000006034970284,"y":8.498090358137434E-146},{"x":-0.24000006169080734,"y":4.297123512648931E-139},{"x":-0.18000006303191185,"y":1.5105143747621218E-132},{"x":-0.12000006437301636,"y":3.691156182843066E-126},{"x":-0.060000065714120865,"y":6.270331682802175E-120},{"x":-6.705522537231445E-8,"y":7.404728517709424E-114},{"x":0.05999993160367012,"y":6.078806230830808E-108},{"x":0.11999993026256561,"y":3.4691093772710382E-102},{"x":0.1799999289214611,"y":1.3762845015356378E-96},{"x":0.2399999275803566,"y":3.795674647579944E-91},{"x":0.2999999262392521,"y":7.277132329850067E-86},{"x":0.3599999248981476,"y":9.698891457036999E-81},{"x":0.4199999235570431,"y":8.986166459405543E-76},{"x":0.47999992221593857,"y":5.7878511394684175E-71},{"x":0.5399999208748341,"y":2.5914974138440473E-66},{"x":0.5999999195337296,"y":8.066306873558855E-62},{"x":0.659999918192625,"y":1.7453769414996687E-57},{"x":0.7199999168515205,"y":2.625392628171194E-53},{"x":0.779999915510416,"y":2.74530007684044E-49},{"x":0.8399999141693115,"y":1.9956111253979068E-45},{"x":0.899999912828207,"y":1.0084457594385378E-41},{"x":0.9599999114871025,"y":3.5425803158997096E-38},{"x":1.019999910145998,"y":8.651220865755213E-35},{"x":1.0799999088048935,"y":1.4686747475789843E-31},{"x":1.139999907463789,"y":1.7332626920942418E-28},{"x":1.1999999061226845,"y":1.4219806410548192E-25},{"x":1.25999990478158,"y":8.109862896734052E-23},{"x":1.3199999034404755,"y":3.215317571586265E-20},{"x":1.379999902099371,"y":8.861857639885287E-18},{"x":1.4399999007582664,"y":1.6979159876603773E-15},{"x":1.499999899417162,"y":2.2615081632102484E-13},{"x":1.5599998980760574,"y":2.0939709637907934E-11},{"x":1.619999896734953,"y":1.3478255479072613E-9},{"x":1.6799998953938484,"y":6.030971087720636E-8},{"x":1.739999894052744,"y":1.875993556111744E-6},{"x":1.7999998927116394,"y":4.056635356393333E-5},{"x":1.859999891370535,"y":6.098052151343168E-4},{"x":1.9199998900294304,"y":0.006372455777420705},{"x":1.9799998886883259,"y":0.04629275844616156},{"x":2.0399998873472214,"y":0.2337813288199048},{"x":2.099999886006117,"y":0.8207239732100083},{"x":2.1599998846650124,"y":2.0029723270505664},{"x":2.219999883323908,"y":3.398156001567204},{"x":2.2799998819828033,"y":4.007764639778572},{"x":2.339999880641699,"y":3.2858795490140857},{"x":2.3999998793005943,"y":1.8728008725028966},{"x":2.45999987795949,"y":0.7420310868049215},{"x":2.5199998766183853,"y":0.20438222867765646},{"x":2.579999875277281,"y":0.03913404089701856},{"x":2.6399998739361763,"y":0.00520902919965667},{"x":2.699999872595072,"y":4.8200264643181317E-4},{"x":2.7599998712539673,"y":3.100506077674955E-5},{"x":2.8199998699128628,"y":1.3864566166371108E-6},{"x":2.8799998685717583,"y":4.3099329696395804E-8},{"x":2.9399998672306538,"y":9.313765097953726E-10},{"x":2.9999998658895493,"y":1.399170301845073E-11}]},{"name":"3937abeb-60c4-43cf-9c01-1ee7abcaeeea","values":[{"x":2.2743486644154367,"y":0},{"x":3.2743486644154367,"y":1.0},{"x":4.274348664415436,"y":0}]}],"marks":[{"type":"line","from":{"data":"2aed3e6d-e071-4d2b-a6a3-f2dfa6961f68"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#FF29D2"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"3937abeb-60c4-43cf-9c01-1ee7abcaeeea"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"2aed3e6d-e071-4d2b-a6a3-f2dfa6961f68\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"2aed3e6d-e071-4d2b-a6a3-f2dfa6961f68\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}], :data ({:name \"2aed3e6d-e071-4d2b-a6a3-f2dfa6961f68\", :values ({:x -3, :y 0.0} {:x -2.9400000013411045, :y 0.0} {:x -2.880000002682209, :y 0.0} {:x -2.8200000040233135, :y 0.0} {:x -2.760000005364418, :y 0.0} {:x -2.7000000067055225, :y 0.0} {:x -2.640000008046627, :y 0.0} {:x -2.5800000093877316, :y 0.0} {:x -2.520000010728836, :y 0.0} {:x -2.4600000120699406, :y 0.0} {:x -2.400000013411045, :y 0.0} {:x -2.3400000147521496, :y 0.0} {:x -2.280000016093254, :y 0.0} {:x -2.2200000174343586, :y 0.0} {:x -2.160000018775463, :y 0.0} {:x -2.1000000201165676, :y 0.0} {:x -2.040000021457672, :y 0.0} {:x -1.9800000227987766, :y 0.0} {:x -1.9200000241398811, :y 0.0} {:x -1.8600000254809856, :y 0.0} {:x -1.8000000268220901, :y 0.0} {:x -1.7400000281631947, :y 0.0} {:x -1.6800000295042992, :y 0.0} {:x -1.6200000308454037, :y 0.0} {:x -1.5600000321865082, :y 4.4E-323} {:x -1.5000000335276127, :y 4.9113798103E-313} {:x -1.4400000348687172, :y 3.574780202683354E-303} {:x -1.3800000362098217, :y 1.8087798075632448E-293} {:x -1.3200000375509262, :y 6.362277264443301E-284} {:x -1.2600000388920307, :y 1.5557149147154005E-274} {:x -1.2000000402331352, :y 2.644465908450867E-265} {:x -1.1400000415742397, :y 3.1249024413932006E-256} {:x -1.0800000429153442, :y 2.5669977469695233E-247} {:x -1.0200000442564487, :y 1.4659023636055675E-238} {:x -0.9600000455975533, :y 5.819358815166062E-230} {:x -0.9000000469386578, :y 1.6059638332043679E-221} {:x -0.8400000482797623, :y 3.080966091073537E-213} {:x -0.7800000496208668, :y 4.108928743782036E-205} {:x -0.7200000509619713, :y 3.809437342210934E-197} {:x -0.6600000523030758, :y 2.4551814429930886E-189} {:x -0.6000000536441803, :y 1.1000106365270637E-181} {:x -0.5400000549852848, :y 3.426105323550485E-174} {:x -0.4800000563263893, :y 7.418140732437264E-167} {:x -0.4200000576674938, :y 1.1165545874443118E-159} {:x -0.3600000590085983, :y 1.168302714230096E-152} {:x -0.30000006034970284, :y 8.498090358137434E-146} {:x -0.24000006169080734, :y 4.297123512648931E-139} {:x -0.18000006303191185, :y 1.5105143747621218E-132} {:x -0.12000006437301636, :y 3.691156182843066E-126} {:x -0.060000065714120865, :y 6.270331682802175E-120} {:x -6.705522537231445E-8, :y 7.404728517709424E-114} {:x 0.05999993160367012, :y 6.078806230830808E-108} {:x 0.11999993026256561, :y 3.4691093772710382E-102} {:x 0.1799999289214611, :y 1.3762845015356378E-96} {:x 0.2399999275803566, :y 3.795674647579944E-91} {:x 0.2999999262392521, :y 7.277132329850067E-86} {:x 0.3599999248981476, :y 9.698891457036999E-81} {:x 0.4199999235570431, :y 8.986166459405543E-76} {:x 0.47999992221593857, :y 5.7878511394684175E-71} {:x 0.5399999208748341, :y 2.5914974138440473E-66} {:x 0.5999999195337296, :y 8.066306873558855E-62} {:x 0.659999918192625, :y 1.7453769414996687E-57} {:x 0.7199999168515205, :y 2.625392628171194E-53} {:x 0.779999915510416, :y 2.74530007684044E-49} {:x 0.8399999141693115, :y 1.9956111253979068E-45} {:x 0.899999912828207, :y 1.0084457594385378E-41} {:x 0.9599999114871025, :y 3.5425803158997096E-38} {:x 1.019999910145998, :y 8.651220865755213E-35} {:x 1.0799999088048935, :y 1.4686747475789843E-31} {:x 1.139999907463789, :y 1.7332626920942418E-28} {:x 1.1999999061226845, :y 1.4219806410548192E-25} {:x 1.25999990478158, :y 8.109862896734052E-23} {:x 1.3199999034404755, :y 3.215317571586265E-20} {:x 1.379999902099371, :y 8.861857639885287E-18} {:x 1.4399999007582664, :y 1.6979159876603773E-15} {:x 1.499999899417162, :y 2.2615081632102484E-13} {:x 1.5599998980760574, :y 2.0939709637907934E-11} {:x 1.619999896734953, :y 1.3478255479072613E-9} {:x 1.6799998953938484, :y 6.030971087720636E-8} {:x 1.739999894052744, :y 1.875993556111744E-6} {:x 1.7999998927116394, :y 4.056635356393333E-5} {:x 1.859999891370535, :y 6.098052151343168E-4} {:x 1.9199998900294304, :y 0.006372455777420705} {:x 1.9799998886883259, :y 0.04629275844616156} {:x 2.0399998873472214, :y 0.2337813288199048} {:x 2.099999886006117, :y 0.8207239732100083} {:x 2.1599998846650124, :y 2.0029723270505664} {:x 2.219999883323908, :y 3.398156001567204} {:x 2.2799998819828033, :y 4.007764639778572} {:x 2.339999880641699, :y 3.2858795490140857} {:x 2.3999998793005943, :y 1.8728008725028966} {:x 2.45999987795949, :y 0.7420310868049215} {:x 2.5199998766183853, :y 0.20438222867765646} {:x 2.579999875277281, :y 0.03913404089701856} {:x 2.6399998739361763, :y 0.00520902919965667} {:x 2.699999872595072, :y 4.8200264643181317E-4} {:x 2.7599998712539673, :y 3.100506077674955E-5} {:x 2.8199998699128628, :y 1.3864566166371108E-6} {:x 2.8799998685717583, :y 4.3099329696395804E-8} {:x 2.9399998672306538, :y 9.313765097953726E-10} {:x 2.9999998658895493, :y 1.399170301845073E-11})} {:name \"3937abeb-60c4-43cf-9c01-1ee7abcaeeea\", :values ({:x 2.2743486644154367, :y 0} {:x 3.2743486644154367, :y 1.0} {:x 4.274348664415436, :y 0})}), :marks ({:type \"line\", :from {:data \"2aed3e6d-e071-4d2b-a6a3-f2dfa6961f68\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#FF29D2\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"3937abeb-60c4-43cf-9c01-1ee7abcaeeea\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}"}
;; <=

;; @@

;; @@
